(function(e){e.fn.stupidtable=function(t){return this.each(function(){var n=e(this);t=t||{};t=e.extend({},e.fn.stupidtable.default_sort_fns,t);var r=function(t,n,r){var i=[];var s=0;if(r){for(var o=t.length-1;o>=0;o--){i.push(o)}}else{var u=t.slice(0).sort(n);for(var o=0;o<t.length;o++){s=e.inArray(t[o],u);while(e.inArray(s,i)!=-1){s++}i.push(s)}}return i};var i=function(e,t){var n=e.slice(0),r=0;for(var i=0;i<t.length;i++){r=t[i];n[r]=e[i]}return n};n.on("click","th",function(){var s=e(this);var o=e.fn.stupidtable.dir;var u=0;n.find("th").slice(0,s.index()).each(function(){var t=e(this).attr("colspan")||1;u+=parseInt(t,10)});var a=s.data("sort-dir")===o.ASC?o.DESC:o.ASC;if(a==o.DESC)var f=s.data("sort-desc")||s.data("sort")||null;else var f=s.data("sort")||null;if(f===null){return}n.trigger("beforetablesort",{column:u,direction:a});n.css("display");e.each(n.children("tbody:not(.sort-ignore)"),function(o,l){var c=e(l);var h=c.children("tr");setTimeout(function(){var o=[];var l=t[f];h.each(function(t,n){var r=e(n).children().eq(u);var i=r.data("sort-value");var s=typeof i!=="undefined"?i:r.text();o.push(s)});var p=!!s.data("sort-dir")&&!s.data("sort-desc");var d=r(o,l,p);n.find("th").data("sort-dir",null).removeClass("sorting-desc sorting-asc");s.data("sort-dir",a).addClass("sorting-"+a);var v=e(i(h,d));c.append(v);n.trigger("aftertablesort",{column:u,direction:a});n.css("display")},10)})})})};e.fn.stupidtable.dir={ASC:"asc",DESC:"desc"};e.fn.stupidtable.default_sort_fns={"int":function(e,t){return parseInt(e,10)-parseInt(t,10)},"float":function(e,t){return parseFloat(e)-parseFloat(t)},string:function(e,t){if(e<t)return-1;if(e>t)return+1;return 0},"string-ins":function(e,t){e=e.toLowerCase();t=t.toLowerCase();if(e<t)return-1;if(e>t)return+1;return 0}}})(jQuery);